<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quick Timezone Converter</title>
    <style>
      :root {
        --bg-top: #ffffff;
        --bg-bottom: #ffffff;
        --panel: #ffffff;
        --text: #14213d;
        --muted: #4f607e;
        --accent: #0c7cd5;
        --accent-soft: #d8ecff;
        --border: #d5e4f3;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        font-weight: 400;
        background: #ffffff;
        color: var(--text);
        display: grid;
        place-items: center;
        padding: 24px;
      }

      .card {
        width: min(920px, 100%);
        background: transparent;
      }

      .header {
        padding: 24px;
        border-bottom: 1px solid var(--border);
        background: #ffffff;
      }

      h1 {
        margin: 0;
        font-size: clamp(1.485rem, 2.2vw, 2.09rem);
      }

      .subtitle {
        margin: 8px 0 0;
        color: var(--muted);
      }

      .controls-note {
        margin: 2px 0 0;
        color: var(--muted);
        font-size: 0.6rem;
      }

      .controls {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 12px;
        padding: 20px 24px;
        border-bottom: 1px solid var(--border);
        align-items: start;
      }

      label {
        display: grid;
        gap: 6px;
        font-size: 0.9rem;
        color: var(--muted);
        align-content: start;
      }

      select,
      input {
        width: 100%;
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 10px 12px;
        font: inherit;
        color: var(--text);
        background: #fff;
      }

      select:focus,
      input:focus {
        outline: 2px solid rgba(12, 124, 213, 0.25);
        border-color: var(--accent);
      }

      .list {
        padding: 4px 24px 10px;
        display: grid;
        gap: 0;
      }

      .row {
        padding: 12px 2px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        border-bottom: 1px solid var(--border);
      }

      .city {
        font-weight: 600;
      }

      .tz {
        color: var(--muted);
        font-size: 0.85rem;
      }

      .time {
        text-align: right;
      }

      .clock {
        font-size: 1.05rem;
        font-weight: 700;
      }

      .clock.working {
        color: #188038;
      }

      .clock.offhours {
        color: #c5221f;
      }

      @media (max-width: 760px) {
        .controls {
          grid-template-columns: 1fr;
        }

        .row {
          flex-direction: column;
          align-items: flex-start;
        }

        .time {
          text-align: left;
        }
      }
    </style>
  </head>
  <body>
    <main class="card">
      <header class="header">
        <h1>What time is it for the International Marketing and Creative Team?</h1>
        <p class="subtitle">Please be mindful when scheduling meetings with your international colleagues.</p>
      </header>

      <section class="controls">
        <label>
          Base Timezone
          <select id="baseTimezone"></select>
          <p class="controls-note">Choose a time in one timezone to instantly convert across your key locations.</p>
        </label>

        <label>
          Time
          <input id="timeInput" type="time" step="60" />
        </label>
      </section>

      <section id="results" class="list"></section>
    </main>

    <script>
      const locations = [
        { label: "Tokyo", zone: "Asia/Tokyo" },
        { label: "Mumbai", zone: "Asia/Kolkata" },
        { label: "Singapore", zone: "Asia/Singapore" },
        { label: "Seoul", zone: "Asia/Seoul" },
        { label: "London", zone: "Europe/London" },
        { label: "Berlin", zone: "Europe/Berlin" },
        { label: "New York", zone: "America/New_York" },
        { label: "Sao Paulo", zone: "America/Sao_Paulo" },
        { label: "San Francisco", zone: "America/Los_Angeles" }
      ];

      const baseSelect = document.getElementById("baseTimezone");
      const timeInput = document.getElementById("timeInput");
      const results = document.getElementById("results");

      function getLocalTimeZone() {
        try {
          return Intl.DateTimeFormat().resolvedOptions().timeZone || "";
        } catch (error) {
          return "";
        }
      }

      function buildBaseOptions() {
        const localZone = getLocalTimeZone();
        let matchedLocalZone = false;

        locations.forEach((loc) => {
          const option = document.createElement("option");
          option.value = loc.zone;
          option.textContent = `${loc.label} (${loc.zone})`;
          if (localZone && loc.zone === localZone) {
            option.selected = true;
            matchedLocalZone = true;
          }
          baseSelect.appendChild(option);
        });

        if (!matchedLocalZone && localZone) {
          const localOption = document.createElement("option");
          localOption.value = localZone;
          localOption.textContent = `Local (${localZone})`;
          localOption.selected = true;
          baseSelect.prepend(localOption);
        }

        if (!baseSelect.value) {
          baseSelect.value = "Europe/London";
        }
      }

      function pad(value) {
        return String(value).padStart(2, "0");
      }

      function currentDateInZone(timeZone) {
        const now = new Date();
        const parts = new Intl.DateTimeFormat("en-US", {
          timeZone,
          year: "numeric",
          month: "2-digit",
          day: "2-digit"
        }).formatToParts(now);
        const map = Object.fromEntries(parts.map((p) => [p.type, p.value]));
        return `${map.year}-${map.month}-${map.day}`;
      }

      function dateTimeInZoneToUtcMs(dateStr, timeStr, timeZone) {
        const [year, month, day] = dateStr.split("-").map(Number);
        const [hour, minute] = timeStr.split(":").map(Number);
        const utcGuess = Date.UTC(year, month - 1, day, hour, minute);

        const parts = new Intl.DateTimeFormat("en-US", {
          timeZone,
          year: "numeric",
          month: "2-digit",
          day: "2-digit",
          hour: "2-digit",
          minute: "2-digit",
          hour12: false
        }).formatToParts(new Date(utcGuess));

        const map = Object.fromEntries(parts.map((p) => [p.type, p.value]));
        const zonedAsUtc = Date.UTC(
          Number(map.year),
          Number(map.month) - 1,
          Number(map.day),
          Number(map.hour),
          Number(map.minute)
        );

        return utcGuess - (zonedAsUtc - utcGuess);
      }

      function formatInZone(ms, timeZone) {
        const date = new Date(ms);

        const clockFormatter = new Intl.DateTimeFormat("en-US", {
          timeZone,
          hour: "2-digit",
          minute: "2-digit",
          hour12: false
        });

        const clock = clockFormatter.format(date);
        const parts = clockFormatter.formatToParts(date);
        const map = Object.fromEntries(parts.map((p) => [p.type, p.value]));
        const hour = Number(map.hour);
        const minute = Number(map.minute);
        const totalMinutes = hour * 60 + minute;
        const isWorking = totalMinutes >= 8 * 60 && totalMinutes <= 19 * 60;

        return { clock, isWorking, totalMinutes };
      }

      function render() {
        if (!timeInput.value) return;

        const baseZone = baseSelect.value;
        const baseDate = currentDateInZone(baseZone);
        const utcMs = dateTimeInZoneToUtcMs(baseDate, timeInput.value, baseZone);

        results.innerHTML = "";

        const ordered = locations
          .map((loc) => {
            const { clock, isWorking, totalMinutes } = formatInZone(utcMs, loc.zone);
            return { loc, clock, isWorking, totalMinutes };
          })
          .sort((a, b) => {
            if (a.totalMinutes !== b.totalMinutes) return a.totalMinutes - b.totalMinutes;
            return a.loc.label.localeCompare(b.loc.label);
          });

        ordered.forEach(({ loc, clock, isWorking }) => {
          const statusClass = isWorking ? "working" : "offhours";
          const displayClock = isWorking ? `ðŸ‘‹ ${clock}` : `ðŸ˜´ ${clock}`;
          const row = document.createElement("article");
          row.className = "row";
          row.innerHTML = `
            <div>
              <div class="city">${loc.label}</div>
              <div class="tz">${loc.zone}</div>
            </div>
            <div class="time">
              <div class="clock ${statusClass}">${displayClock}</div>
            </div>
          `;
          results.appendChild(row);
        });
      }

      function setDefaults() {
        const now = new Date();
        timeInput.value = `${pad(now.getHours())}:${pad(now.getMinutes())}`;
      }

      buildBaseOptions();
      setDefaults();
      render();

      [baseSelect, timeInput].forEach((el) => {
        el.addEventListener("input", render);
        el.addEventListener("change", render);
      });
    </script>
  </body>
</html>
cd "/Users/jhoffmann/Documents/New project"
git add index.html
git commit -m "Update timezone page"
git push

